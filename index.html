<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="viewport" content="width=device-width, 
    user-scalable=no, initial-scale=1, maximum-scale=1, user-scalable=0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>University Project</title>
<style type="text/css">
body {

}
    canvas {
    border: 3px #CCC solid;
    background:#EEEEEE;
    
}

</style>

</head>

<body>
<div id="container">
   <center><canvas id="myCanvas" height="500vw"></canvas></center>
</div>
<div id="nested"></div>

<script>

var canvas=document.getElementById("myCanvas");
canvas.addEventListener("touchmove",doTouchStart,false);
canvas.addEventListener("touchdown",doTouchStart,false);

var ctx=canvas.getContext("2d");
var ctx2=canvas.getContext("2d");
 
var canvasWidth = canvas.width;
var canvasHeight = canvas.height;

var angle = 0;
 
var requestAnimationFrame = window.requestAnimationFrame || 
                            window.mozRequestAnimationFrame || 
                            window.webkitRequestAnimationFrame || 
                            window.msRequestAnimationFrame;

ctx.beginPath();
ctx.arc(150,200,50,0,2*Math.PI);
ctx.strokeStyle="red";
ctx.stroke();

function doTouchStart(event){
     event.preventDefault();
    var radius= 30 + 150 * Math.abs(Math.cos(angle));
    
    ctx2.fillStyle = "#EEEEEE";
    ctx2.fillRect(0, 0, canvasWidth, canvasHeight);
    
    ctx.beginPath();
    ctx.arc(150,200,50,0,2*Math.PI);
    ctx.strokeStyle="red";
    ctx.stroke();

    ctx2.beginPath();
    ctx2.arc(150,200,radius,0,2*Math.PI,false);
    ctx2.closePath();
    ctx2.strokeStyle="green";
    ctx2.stroke();
    
    angle += Math.PI / 64;
    
    requestAnimationFrame(doTouchStart); 
    
    
    var nestedDiv = document.getElementById("nested");
    nestedDiv.textContent = radius;
    
    
}

</script>
</body>
</html>
